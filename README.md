# りーどみー

VisualStudio 2019 を使う  
.net Framework は 2022 ではビルド出来ない

アンコちゃん公式ウィキ: https://seesaawiki.jp/yari_an/d/%a4%cf%a4%b8%a4%e1%a4%c6%a4%ce%a5%d7%a5%e9%a5%b0%a5%a4%a5%f3


## 下準備 1
アンコちゃんのフォルダーから以下の DLL を依存関係に追加する (プラグイン作成に必要)
 * ankoPlugin2.dll
 * LibAnko.dll
依存関係の追加方法は以下
 * ツールバーの プロジェクト > プロジェクト参照の追加 > 左メニューの「参照」
 * 下のボタンの「参照」をクリックして追加する DLL を選択する (複数選択可能)  
   HintPath に該当のDLLの相対/絶対パスを記述する


## 下準備 2
1. AnkoChanPluginSample.csproj を開く
   * 「ソリューションエクスプローラー」の AnckoChanLib をダブルクリックする  
     (ソリューションエクスプローラー が見つからない場合はツールバーの虫眼鏡から検索)
2. PropertyGroup の以下の項目を正しく記述する
   * <StartProgram>この文をアンコちゃんの実行ファイルのパスに変更する</StartProgram>
3. ツールバーのデバッグ > オプション を開き「マイコードのみ」にチェックをつける
   (これをしないと関係のない例外が出て面倒)
4. ツールバーの「緑色の三角」をクリックして実行する
5. アンコちゃんの設定を開き 「設定レベル」にチェックを付けてOKを押して再度開く
6. 設定の「上級者設定１」のタブで「プラグインフォルダー」の項目に以下を設定する
   * [このプロジェクトフォルダ]\obj\Debug\net4.8-windows


## メモ
### ブレークポイント
エディターの列番号の左をクリックすると ブレークポイント を設定できる  
ブレークポイントまで実行された場合には該当行で停止する

ブレークポイントで停止中は変数にカーソルを合わせると中身が見える  
また、下の「ローカル」タブで現在の変数の中身を確認出来る

#### デバッグ停止時に利用可能なツールバーのアイコン
* ステップイン
  * 関数で停止している場合は、関数の中に移動する. それ以外の場合は次の行まで実行する
* ステップオーバー
  * 次の行まで実行する. 関数の場合でも中身に移動せずに次の行まで実行する
* ステップアウト
  * 現在の関数の呼出元に戻るまで実行する

[ホットリロード]
実行中にプログラムを編集/保存してホットリロード (ツールバーの火のマーク) をすると  
プログラムを再実行せずにプログラムの内容を反映できる  
(一部ホットリロードが不可能な場合もあるのでその場合は再実行する)


## プラグインのビルド
ツールバーのビルド > ソリューションのビルド を選択するとDLLがビルドされる  
ビルド先は下の「出力」タブ (無い場合はツールバーの虫眼鏡から「出力」を検索) に表示される  
実用する場合は実行ボタンの左の「Debug」を「Release」にしてビルドした方が良い?
* Release にしたまま忘れていると、ブレークポイントが反映されないと表示されるのでDebugに戻すのを忘れない
* Debug と Release はそれぞれ出力フォルダが違うので注意！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！


## メモ 2
ブレークポイントが反応しない場合は以下の設定を確認！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！  
ブレークポイントが反応しない場合は以下の設定を確認！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！  
ブレークポイントが反応しない場合は以下の設定を確認！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！  
ブレークポイントが反応しない場合は以下の設定を確認！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！  
* 「Debug」になっているか確認
* アンコちゃんの「上級者設定1」の「プラグインフォルダー」の設定

コンソール出力は使えないので代わりに Debug.Print() を利用する  
出力タブに出力される


## おまけ
C# のテストサイト https://dotnetfiddle.net
 * 左側の Compiler で Latest を最初に選ぶと良い

C# (dotnet) の正規表現テスターサイト http://regexstorm.net/tester
 * 使い方
   * Pattern     :  正規表現
   * Input       :  テストする文字列
   * Replacement :  置換文字 (下の Context 欄に置換後の文字が出力される)
 * 例
   * Pattern     :  (.*)1d([1-9][0-9]*)(.*)
   * Input       :  これは1d10だ
   * Replacement :  $1[RND]$3
   * Context     :  これは[RND]だ

正規表現メモ
 * () の中はキャプチャされ $n で取り出す
 * $0 の場合は全文字列. $n なら n 番目の () の文字
